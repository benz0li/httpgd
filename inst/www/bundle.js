(()=>{"use strict";var t={861:function(t,e){var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.fetch_remove=e.url_remove=e.fetch_plot=e.url_plot=e.fetch_plots=e.url_plots=e.fetch_renderers=e.url_renderers=e.fetch_clear=e.url_clear=e.fetch_state=e.url_state=e.new_websocket=e.url_websocket=void 0;const n="http://";function o(t){const e=new Headers;return t.token&&e.set("X-HTTPGD-TOKEN",t.token),e}function s(t,e){return i(this,void 0,void 0,(function*(){const i=yield fetch(e,{headers:o(t)});return yield i.json()}))}function r(t){return"ws://"+t.host}function a(t){return n+t.host+"/state"}function h(t){return n+t.host+"/clear"}function l(t){return n+t.host+"/renderers"}function c(t){return n+t.host+"/plots"}function d(t,e,i,o){const s=new URL(n+t.host+"/plot");return e.id&&s.searchParams.append("id",e.id),e.renderer&&s.searchParams.append("renderer",e.renderer),e.width&&s.searchParams.append("width",Math.round(e.width).toString()),e.height&&s.searchParams.append("height",Math.round(e.height).toString()),e.zoom&&s.searchParams.append("zoom",e.zoom.toString()),e.download&&s.searchParams.append("download",e.download),i&&t.token&&s.searchParams.append("token",t.token),o&&s.searchParams.append("c",o),s.href}function u(t,e){const i=new URL(n+t.host+"/remove");return i.searchParams.append("id",e.id),i.href}e.url_websocket=r,e.new_websocket=function(t){return new WebSocket(r(t))},e.url_state=a,e.fetch_state=function(t){return s(t,a(t))},e.url_clear=h,e.fetch_clear=function(t){return s(t,h(t))},e.url_renderers=l,e.fetch_renderers=function(t){return s(t,l(t))},e.url_plots=c,e.fetch_plots=function(t){return s(t,c(t))},e.url_plot=d,e.fetch_plot=function(t,e){return s(t,d(t,e))},e.url_remove=u,e.fetch_remove=function(t,e){return s(t,u(t,e))}},485:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HttpgdConnection=void 0;const n=i(861),o=i(215);class s{constructor(t,e){this.mode=0,this.pausePoll=!1,this.disconnected=!1,this.remoteStateChanged=new o.StateChangeListener,this.connectionChanged=new o.StateChangeListener,this.backend=t,this.allowWebsockets=e||!1}open(){0==this.mode&&this.start(3)}close(){0!=this.mode&&this.start(0)}start(t){if(this.mode!=t)switch(t){case 1:this.clearWebsocket(),this.clearPoll(),this.pollHandle=setInterval((()=>this.poll()),s.INTERVAL_POLL),this.mode=t;break;case 2:this.clearWebsocket(),this.clearPoll(),this.pollHandle=setInterval((()=>this.poll()),s.INTERVAL_POLL_SLOW),this.mode=t;break;case 3:if(!this.allowWebsockets){this.start(1);break}this.clearPoll(),this.clearWebsocket(),this.socket=n.new_websocket(this.backend),this.socket.onmessage=t=>this.onWsMessage(t.data),this.socket.onopen=()=>this.onWsOpen(),this.socket.onclose=()=>this.onWsClose(),this.socket.onerror=()=>this.start(2),this.mode=t,this.poll();break;case 0:this.clearWebsocket(),this.clearPoll(),this.mode=t}}clearPoll(){this.pollHandle&&clearInterval(this.pollHandle)}clearWebsocket(){this.socket&&(this.socket.onclose=()=>{},this.socket.close())}poll(){this.pausePoll||n.fetch_state(this.backend).catch((t=>{throw t})).then((t=>{this.setDisconnected(!1),2===this.mode&&this.start(3),this.pausePoll||this.checkState(t)})).catch((()=>{this.setDisconnected(!0),2!==this.mode&&this.start(2)}))}onWsMessage(t){if(t.startsWith("{")){const e=JSON.parse(t);this.checkState(e)}else console.log("Unknown WS message: "+t)}onWsClose(){this.setDisconnected(!0)}onWsOpen(){this.setDisconnected(!1)}setDisconnected(t){this.disconnected!=t&&(this.disconnected=t,this.disconnected?this.start(2):this.start(3),this.connectionChanged.notify(t))}checkState(t){this.lastState&&this.lastState.active===t.active&&this.lastState.hsize===t.hsize&&this.lastState.upid===t.upid||(this.lastState=t,this.remoteStateChanged.notify(t))}onRemoteChange(t){this.remoteStateChanged.subscribe(t)}onConnectionChange(t){this.connectionChanged.subscribe(t)}}e.HttpgdConnection=s,s.INTERVAL_POLL=500,s.INTERVAL_POLL_SLOW=15e3},774:(t,e,i)=>{e.M=void 0;const n=i(861),o=i(485),s=i(215);e.M=class{constructor(t,e,i){this.plotsChanged=new s.StateChangeListener,this.deviceActiveChanged=new s.StateChangeListener,this.data={},this.backend={host:t,token:e},this.connection=new o.HttpgdConnection(this.backend,i),this.connection.onRemoteChange(((t,e)=>this.remoteStateChanged(t,e)))}connect(){return this.connection.open(),this.updateRenderers()}onConnectionChange(t){this.connection.onConnectionChange(t)}remoteStateChanged(t,e){e&&e.hsize===t.hsize&&e.upid===t.upid||this.updatePlots(),e&&e.active==t.active||this.deviceActiveChanged.notify(t.active)}localStateChanged(t){var e;this.remoteStateChanged(t,null===(e=this.data.plots)||void 0===e?void 0:e.state)}updateRenderers(){return(0,n.fetch_renderers)(this.backend).then((t=>{this.data.renderers=t}))}updatePlots(){(0,n.fetch_plots)(this.backend).then((t=>{this.data.plots=t,this.plotsChanged.notify(t)}))}getPlots(){return this.data.plots?this.data.plots.plots:[]}getRenderers(){return this.data.renderers?this.data.renderers.renderers:[]}getPlotURL(t){return this.data.plots?(0,n.url_plot)(this.backend,t,!0,this.data.plots.state.upid.toString()):void 0}onPlotsChanged(t){this.plotsChanged.subscribe(t)}onDeviceActiveChanged(t){this.deviceActiveChanged.subscribe(t)}removePlot(t){(0,n.fetch_remove)(this.backend,t).then((t=>this.localStateChanged(t)))}clearPlots(){(0,n.fetch_clear)(this.backend).then((t=>this.localStateChanged(t)))}}},215:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StateChangeListener=void 0,e.StateChangeListener=class{constructor(){this.fun=[]}notify(t){for(let e=0;e<this.fun.length;++e)this.fun[e](t,this.oldState);this.oldState=t}subscribe(t){this.fun.push(t)}}},900:(t,e,i)=>{t.exports=i.p+"103f47f4ae284eb62b37.svg"}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t=i(774),e=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}))},n=function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function o(t){var e=document.getElementById(t);if(!e)throw new ReferenceError(t+" is not defined");return e}function s(t,e,i){var n=document.createElement("a");n.href=t,e&&(n.download=e),i&&(n.target="_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}function r(t,e){var i=document.createElement("canvas");i.style.display="none",document.body.appendChild(i);var n=t.getBoundingClientRect();i.width=n.width,i.height=n.height;var o=i.getContext("2d");o&&(o.drawImage(t,0,0,i.width,i.height),e(i).finally((function(){return document.body.removeChild(i)})))}function a(t,e,i){var n=t.value;if(!n.match(/^\d+$/))return!1;var o=parseInt(n);return o>=e&&o<=i}function h(t,e,i){return e?t.classList.add(i):t.classList.remove(i),e}var l="scrollBehavior"in document.documentElement.style,c=i(900),d=function(){function t(t){var e=this;this.viewer=t,this.elemModal=o("exp-modal"),this.imgPreview=o("exp-image"),this.inputWidth=o("ie-width"),this.inputHeight=o("ie-height"),this.inputZoom=o("ie-scale"),this.btnOpen=o("ie-btn-open"),this.btnDownload=o("ie-btn-download"),this.selectFormat=o("ie-format"),this.btnClose=o("exp-modal-close"),this.btnClose.onclick=function(){return e.hide()},window.onmousedown=function(t){t.target==e.elemModal&&e.hide()},this.inputWidth.addEventListener("input",(function(){return e.update()})),this.inputHeight.addEventListener("input",(function(){return e.update()})),this.inputZoom.addEventListener("input",(function(){return e.update()})),this.btnDownload.onclick=function(){return e.clickDownload()},this.btnOpen.onclick=function(){return e.clickOpen()}}return t.prototype.initRenderers=function(){var t=this;this.renderers=this.viewer.httpgd.getRenderers(),this.renderers.sort((function(t,e){return function(t,e){return t<e?-1:t>e?1:0}(t.name,e.name)})).forEach((function(e){var i=document.createElement("option");i.value=e.id,i.text=e.name+" (*"+e.ext+")",t.selectFormat.add(i)})),this.selectFormat.value="svg"},t.prototype.hide=function(){this.elemModal.style.display="none"},t.prototype.isVisible=function(){return this.elemModal.style.display&&"none"!==this.elemModal.style.display},t.prototype.validWidth=function(){return a(this.inputWidth,t.MIN_PREVIEW_SIZE,t.MAX_PREVIEW_SIZE)},t.prototype.getWidth=function(){return Math.min(parseInt(this.inputWidth.value),t.MAX_PREVIEW_SIZE)},t.prototype.validHeight=function(){return a(this.inputHeight,t.MIN_PREVIEW_SIZE,t.MAX_PREVIEW_SIZE)},t.prototype.getHeight=function(){return Math.min(parseInt(this.inputHeight.value),t.MAX_PREVIEW_SIZE)},t.prototype.validZoom=function(){return a(this.inputZoom,t.MIN_PREVIEW_ZOOM,t.MAX_PREVIEW_ZOOM)},t.prototype.getZoom=function(){return Math.max(parseInt(this.inputZoom.value)/100,t.MIN_PREVIEW_ZOOM)},t.prototype.getRenderer=function(){var t=this;return this.viewer.httpgd.getRenderers().find((function(e){return e.id==t.selectFormat.value}))},t.prototype.clickDownload=function(){var t=this.viewer.plotView.getCurrentPlotId();if(t){var e=this.getRenderer();s(this.viewer.httpgd.getPlotURL({width:this.getWidth(),height:this.getHeight(),zoom:this.getZoom(),id:t,renderer:e.id,download:"plot_"+t+e.ext}))}},t.prototype.clickOpen=function(){var t=this.viewer.plotView.getCurrentPlotId();if(t){var e=this.getRenderer();s(this.viewer.httpgd.getPlotURL({width:this.getWidth(),height:this.getHeight(),zoom:this.getZoom(),id:t,renderer:e.id}),null,!0)}},t.prototype.update=function(){if(!(h(this.inputWidth,!this.validWidth(),"invalid-input")||h(this.inputHeight,!this.validHeight(),"invalid-input")||h(this.inputZoom,!this.validZoom(),"invalid-input"))){var t=this.viewer.plotView.getCurrentPlotId();if(t){var e=this.viewer.httpgd.getPlotURL({width:this.getWidth(),height:this.getHeight(),zoom:this.getZoom(),id:t});this.imgPreview.src=e}else this.imgPreview.src=c}},t.prototype.show=function(){this.elemModal.style.display="block",this.update()},t.MIN_PREVIEW_SIZE=1,t.MAX_PREVIEW_SIZE=1e4,t.MIN_PREVIEW_ZOOM=.01,t.MAX_PREVIEW_ZOOM=1e4,t}(),u=function(){function t(t){this.viewer=t,this.overlayContainer=o("overlay"),this.overlayText=o("overlay-text")}return t.prototype.show=function(t){this.overlayText.innerText=t,this.overlayContainer.style.display="inline"},t.prototype.hide=function(){this.overlayContainer.style.display="none"},t.TEXT_CONNECTION_LOST="Connection lost.",t.TEXT_DEVICE_INACTIVE="Device inactive.",t}(),p=function(){function t(e){var i=this;this.viewer=e,this.dropdown=o("tb-more").parentElement,this.dropdown.onmouseenter=function(){return i.showDropdown()},this.dropdown.onmouseleave=function(){return i.hideDropdown()},this.zoomLabel=o("tb-zlvl"),this.pageLabel=o("tb-pnum"),this.elemToolbar=o("toolbar"),this.elemContainer=o("container"),this.timoutFade=setTimeout((function(){return i.fadeOut()}),t.DELAY_FADE_OUT),this.elemContainer.onmousemove=function(){i.elemToolbar.classList.remove("fade-out"),clearTimeout(i.timoutFade),i.timoutFade=setTimeout((function(){return i.fadeOut()}),t.DELAY_FADE_OUT)},this.elemContainer.onmouseleave=function(){return i.fadeOut()}}return t.prototype.registerActions=function(t){for(var e=this,i={},n=function(t){if(o(t.id).onclick=function(){t.f(),e.hideDropdown()},t.keys)for(var n=0,s=t.keys;n<s.length;n++){var r=s[n];i[r]=t}},s=0,r=t;s<r.length;s++)n(r[s]);window.addEventListener("keydown",(function(t){if(!e.viewer.exportView.isVisible()){var n=i[t.keyCode];return!n||n.altKey&&!t.altKey?void 0:(n.f(),void t.preventDefault())}}))},t.prototype.showDropdown=function(){this.dropdown.classList.add(t.CSS_SHOW_DROPDOWN)},t.prototype.hideDropdown=function(){this.dropdown.classList.remove(t.CSS_SHOW_DROPDOWN)},t.prototype.setZoomLabelText=function(t){this.zoomLabel.childNodes[0].nodeValue=t},t.prototype.setPageLabelText=function(t){this.pageLabel.childNodes[0].nodeValue=t},t.prototype.fadeOut=function(){this.elemToolbar.classList.add("fade-out")},t.DELAY_FADE_OUT=4e3,t.CSS_SHOW_DROPDOWN="drop-open",t}(),f=function(){function t(t,e){var i=this;this.viewer=t,this.elemPlotView=o("plotview"),this.elemSidebar=o("sidebar"),e&&(this.elemSidebar.classList.add("notransition","nohist"),this.elemPlotView.classList.add("notransition","nohist"),setTimeout((function(){i.elemSidebar.classList.remove("notransition"),i.elemPlotView.classList.remove("notransition")}),300))}return t.prototype.update=function(t){for(var e=this,i=0;i<this.elemSidebar.children.length;)i>=t.plots.length||this.elemSidebar.children[i].getAttribute("data-pid")!==t.plots[i].id?this.elemSidebar.removeChild(this.elemSidebar.children[i]):i++;for(var n=function(){var n=t.plots[i],s=document.createElement("div");s.setAttribute("data-pid",n.id);var r=document.createElement("a");r.innerHTML="&#10006;",r.onclick=function(){e.viewer.httpgd.removePlot({id:n.id}),e.viewer.httpgd.updatePlots()};var a=document.createElement("img");s.classList.add("history-item"),a.setAttribute("src",o.viewer.httpgd.getPlotURL({id:n.id})),s.onclick=function(){return e.viewer.plotView.setPage(n.id)},s.appendChild(a),s.appendChild(r),o.elemSidebar.appendChild(s)},o=this;i<t.plots.length;++i)n()},t.prototype.setSelected=function(t){for(var e,i,n,o=0;o<this.elemSidebar.children.length;++o){var s=this.elemSidebar.children[o];s.getAttribute("data-pid")===t?(s.classList.add("history-selected"),e=s):s.classList.remove("history-selected")}if(e){var r=e.getBoundingClientRect(),a=r.y+this.elemSidebar.scrollTop,h=r.height,c=a-(this.elemSidebar.getBoundingClientRect().height/2-h/2);i=this.elemSidebar,n={top:c,behavior:"smooth"},l?i.scrollTo(n):i.scrollTo(n.left?n.left:0,n.top?n.top:0)}},t.prototype.toggle=function(){var t=this;this.elemSidebar.classList.toggle("nohist"),this.elemPlotView.classList.toggle("nohist"),setTimeout((function(){return t.viewer.plotView.update()}),300)},t.prototype.hideWithoutAnimation=function(){var t=this;this.elemSidebar.classList.add("notransition","nohist"),this.elemPlotView.classList.add("notransition","nohist"),this.viewer.plotView.update(),setTimeout((function(){t.elemSidebar.classList.remove("notransition"),t.elemPlotView.classList.remove("notransition")}),300)},t}(),g=function(){function t(e,i){var n=this;this.resizeBlocked=!1,this.scale=t.SCALE_DEFAULT,this.page=1,this.viewer=e,this.toolbar=new p(e),this.sidebar=new f(e,i),this.image=o("drawing"),this.image.src=c,window.addEventListener("resize",(function(){return n.resize()}))}return t.prototype.updatePlots=function(t){this.plots=t,this.page=t.plots.length,this.updatePageLabel(),this.sidebar.update(t)},t.prototype.getCurrentPlotId=function(){if(!this.plots||0==this.plots.plots.length)return null;for(;this.page<1;)this.page+=this.plots.plots.length;for(;this.page>this.plots.plots.length;)this.page-=this.plots.plots.length;return this.plots.plots[this.page-1].id},t.prototype.update=function(){if(this.plots&&0!=this.plots.plots.length){var t=this.getCurrentPlotId(),e=this.image.getBoundingClientRect(),i=this.viewer.httpgd.getPlotURL({id:t,width:e.width,height:e.height,zoom:this.scale});i&&(this.image.src=i),this.updatePageLabel(),this.sidebar.setSelected(t)}else this.image.src=c},t.prototype.resize=function(){var e=this;this.resizeBlocked||(this.resizeBlocked=!0,setTimeout((function(){e.update(),e.resizeBlocked=!1}),t.COOLDOWN_RESIZE))},t.prototype.zoomOut=function(){this.scale-t.SCALE_STEP>t.SCALE_MIN&&(this.scale-=t.SCALE_STEP),this.updateZoomLabel(),this.resize()},t.prototype.zoomIn=function(){this.scale+=t.SCALE_STEP,this.updateZoomLabel(),this.resize()},t.prototype.zoomReset=function(){this.scale=t.SCALE_DEFAULT,this.updateZoomLabel(),this.resize()},t.prototype.getZoomString=function(){return Math.ceil(this.scale/t.SCALE_DEFAULT*100)+"%"},t.prototype.updateZoomLabel=function(){this.toolbar.setZoomLabelText(this.getZoomString())},t.prototype.nextPage=function(){this.page++,this.update()},t.prototype.prevPage=function(){this.page--,this.update()},t.prototype.newestPage=function(){this.plots&&this.page!=this.plots.plots.length&&(this.page=this.plots.plots.length,this.update())},t.prototype.setPage=function(t){if(this.plots)for(var e=0;e<this.plots.plots.length;++e)if(this.plots.plots[e].id===t)return this.page=e+1,void this.update()},t.prototype.getPageString=function(){return this.plots?this.page+"/"+this.plots.plots.length:"0/0"},t.prototype.updatePageLabel=function(){this.toolbar.setPageLabelText(this.getPageString())},t.prototype.downloadSVG=function(){var t;t=this.image,fetch(t.src).then((function(t){return t.blob()})).then((function(t){s(URL.createObjectURL(t),"plot.svg")}))},t.prototype.downloadPNG=function(){!function(t,i){var o=this;r(t,(function(t){return e(o,void 0,void 0,(function(){return n(this,(function(e){return s(t.toDataURL("image/png").replace("image/png","image/octet-stream"),"plot.png"),[2]}))}))}))}(this.image)},t.prototype.copyPNG=function(){!function(t){var i,o=this;(null===(i=navigator.clipboard)||void 0===i?void 0:i.write)?r(t,(function(t){return e(o,void 0,void 0,(function(){var e;return n(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(e){return t.toBlob(e)}))];case 1:return(e=i.sent())?[4,navigator.clipboard.write([new ClipboardItem(Object.defineProperty({},e.type,{value:e,enumerable:!0}))])]:[2];case 2:return[2,i.sent()]}}))}))})):console.warn("No clipboard API support!")}(this.image)},t.prototype.removePlot=function(){this.viewer.httpgd.removePlot({id:this.getCurrentPlotId()})},t.prototype.clearPlots=function(){this.viewer.httpgd.clearPlots()},t.COOLDOWN_RESIZE=200,t.SCALE_DEFAULT=1.25,t.SCALE_STEP=t.SCALE_DEFAULT/12,t.SCALE_MIN=.5,t}(),v=function(){function e(e,i,n,o){var s=this;this.sidebarHidden=!1,this.httpgd=new t.M(e,i,n),o&&(this.sidebarHidden=!0),this.httpgd.onPlotsChanged((function(t){return s.plotsChanged(t)})),this.httpgd.onConnectionChange((function(t){return s.connectionChanged(t)})),this.httpgd.onDeviceActiveChanged((function(t){return s.deviceActiveChanged(t)}))}return e.prototype.plotsChanged=function(t){var e,i;null===(e=this.plotView)||void 0===e||e.updatePlots(t),null===(i=this.plotView)||void 0===i||i.update()},e.prototype.connectionChanged=function(t){var e,i;t?null===(e=this.overlayView)||void 0===e||e.show(u.TEXT_CONNECTION_LOST):null===(i=this.overlayView)||void 0===i||i.hide()},e.prototype.deviceActiveChanged=function(t){var i,n=this;this.deviceInactiveDelayed&&clearTimeout(this.deviceInactiveDelayed),t?null===(i=this.overlayView)||void 0===i||i.hide():this.deviceInactiveDelayed=setTimeout((function(){var t;return null===(t=n.overlayView)||void 0===t?void 0:t.show(u.TEXT_DEVICE_INACTIVE)}),e.COOLDOWN_DEVICE_INACTIVE)},e.prototype.init=function(){var t=this;this.plotView=new g(this,this.sidebarHidden),this.overlayView=new u(this),this.exportView=new d(this),this.httpgd.connect().then((function(){t.exportView.initRenderers()})),this.plotView.toolbar.registerActions([{keys:[37,40],f:function(){return t.plotView.prevPage()},id:"tb-left"},{keys:[39,38],f:function(){return t.plotView.nextPage()},id:"tb-right"},{keys:[78],f:function(){return t.plotView.newestPage()},id:"tb-pnum"},{keys:[187],f:function(){return t.plotView.zoomIn()},id:"tb-plus"},{keys:[189],f:function(){return t.plotView.zoomOut()},id:"tb-minus"},{keys:[48],f:function(){return t.plotView.zoomReset()},id:"tb-zlvl"},{id:"tb-clear",altKey:!0,keys:[68],f:function(){return t.plotView.clearPlots()}},{id:"tb-remove",keys:[46,68],f:function(){return t.plotView.removePlot()}},{id:"tb-save-svg",keys:[83],f:function(){return t.plotView.downloadSVG()}},{id:"tb-save-png",keys:[80],f:function(){return t.plotView.downloadPNG()}},{id:"tb-copy-png",keys:[67],f:function(){return t.plotView.copyPNG()}},{id:"tb-history",keys:[72],f:function(){return t.plotView.sidebar.toggle()}},{id:"tb-export",keys:[69],f:function(){return t.exportView.show()}}])},e.COOLDOWN_DEVICE_INACTIVE=1e3,e}(),m=new URL(window.location.href).searchParams;const w={viewer:new v(m.get("host")||window.location.host,m.get("token")||void 0,!m.has("ws")||"0"!=m.get("ws"),!!m.has("sidebar")&&"0"==m.get("sidebar"))};window.onload=function(){w.viewer.init()}})()})();